<div class="sub_wrap">
	<div class="container clearfix">
		<div class="content" style="position:relative; padding:0 10px 0 10px;">
			<ul class="list_tab" style="margin-bottom:10px;width:75%;z-index:10000;" id="calculation_header">
			</ul>
		</div>

		<div>
			<select id="quater_month" style="width:100px;">
				<option value="0">1</option>
				<option value="1">2</option>
				<option value="2">3</option>
				<option value="3">4</option>
				<option value="4">5</option>
				<option value="5">6</option>
				<option value="6">7</option>
				<option value="7">8</option>
				<option value="8">9</option>
				<option value="9">10</option>
				<option value="10">11</option>
				<option value="11">12</option>
			</select>월
			<button id="button_quater_5_0" class="menu1" data-menu="10" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickDaySettlePeriod(5, 1);">5일(리셋)</button>
			<button id="button_quater_5_1" class="menu1" data-menu="10" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickDaySettlePeriod(5, 0);">5일(누적)</button>
			<button id="button_quater_10_0" class="menu1" data-menu="11" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickDaySettlePeriod(10, 1);">10일(리셋)</button>
			<button id="button_quater_10_1"  class="menu1" data-menu="11" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickDaySettlePeriod(10, 0);">10일(누적)</button>
			<button id="button_quater_15_0" class="menu1" data-menu="11" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickDaySettlePeriod(15, 1);">15일(리셋)</button>
			<button id="button_quater_15_1"  class="menu1" data-menu="11" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickDaySettlePeriod(15, 0);">15일(누적)</button>
		</div>
		<div id="settle_sub_quater"></div>
		<div id="view_class"></div>
		<div id="view_class_state"></div>

		<div class="list">
			<%- include('settle_all_overview') %>

			<div style="background-color:#ffffff;text-align:right;padding-right:5px;padding-top:0px;padding-bottom:0px;" colspan="19">
				<select id="quater_month" style="width:100px;">
					<option value="0">1</option>
					<option value="1">2</option>
					<option value="2">3</option>
					<option value="3">4</option>
					<option value="4">5</option>
					<option value="5">6</option>
					<option value="6">7</option>
					<option value="7">8</option>
					<option value="8">9</option>
					<option value="9">10</option>
					<option value="10">11</option>
					<option value="11">12</option>
				</select>월
				<button id="button_quater1" class="menu1" data-menu="2" style="border:1px solid rgb(95, 93, 93);width:170px;height:25px;text-align:center;color:white" onclick="Request1stHalf();"><%=__('Half1')%></button>
				<button id="button_quater2" class="menu1" data-menu="3" style="border:1px solid rgb(95, 93, 93);width:170px;height:25px;text-align:center;color:white" onclick="Request2ndHalf();"><%=__('Half2')%></button>
				<div id="testSettle" style="background-color:#ffffff;text-align:right;padding-right:5px;padding-top:0px;padding-bottom:0px;" colspan="19">
				</div>
			</div>

			<div class="list_tit" id = "list_tit">
			</div>

				<div class="search_wrap" id="div_realtimebet">

				<table class="search_list">
					<caption><%=__('SearchResult')%></caption>
					<colgroup>
						<col style="width:2%">
						<col style="width:4%">
						<col style="width:4%">

						<col style="width:4%">
						<col style="width:4%">

						<col style="width:5%;">
						<col style="width:5%;">
						<col style="width:5%;">
						<col style="width:5%;">
						<col style="width:5%;">

						<col style="width:5%;">
						<col style="width:5%;">
						<col style="width:5%;">
						<col style="width:5%;">

						<col style="width:5%;">
						<col style="width:5%;">
						<col style="width:5%;">
						<col style="width:5%;">
						<col style="width:5%;">
						<col style="width:5%;">
						<col style="width:9%;">
					</colgroup>
					<thead>
					<tr>
						<th scope="col">순번</th>
						<th scope="col">본사</th>
						<th scope="col"><%=__('Nickname')%></th>

						<th scope="col" style="background-color:#78bfdb;color:white;"><%=__('Baccarat')%><br><%=__('Settle')%></th>
						<th scope="col" style="background-color:#78bfdb;color:white;"><%=__('Slot')%><br><%=__('Settle')%></th>

						<th scope="col">합계</th>
						<th scope="col">B<%=__('WinLose')%></th>
						<th scope="col">S<%=__('WinLose')%></th>
						<th scope="col">부본 죽장</th>

						<th scope="col">대본 B 알값</th>
						<th scope="col">대본 S 알값</th>

						<th scope="col">대본 죽장</th>

						<th scope="col"><%=__('Total')%></th>

						<th scope="col">죽장 지급</th>
						<th scope="col">죽장 이월</th>
						<th scope="col">죽장 수금</th>
						<th scope="col">죽장 적립</th>
						<th scope="col">죽장 총합</th>
						<th scope="col">전월죽장이월</th>
						<th scope="col">총 이월</th>
						<th scope="col">메모</th>
					</tr>
					</thead>
					<tbody id="list_agents">
					</tbody>
				</table>

				<div class="pagination mt0" id="pagination">
				</div>
			</div>
		</div>

	</div>
</div>
<div class="modal" id="modal_alert">
	<div class="modal_body" id="modal_body">
		<h2>처리중입니다</h2>
		<p style="font-size: 16px;">잠시만 기다려 주세요</p>
	</div>
</div>
<script>
	const modal = document.querySelector('.modal');
	function openAlertModal() {
		modal.style.display="flex";
	}
	function closeAlertModal() {
		modal.style.display = "none";
	}
</script>
<script type="text/javascript" src="js/constants.js"></script>
<script type="text/javascript" src="js/enum.js"></script>
<script type="text/javascript" src="js/time.js"></script>
<script type="text/javascript" src="js/manage_calculation_menu.js"></script>
<script type="text/javascript" src="js/manage_setting_ref.js"></script>
<script type="text/javascript" src="js/manage_user_menu.js"></script>
<script type="text/javascript" src="js/pagination.js"></script>
<script type="text/javascript" src="../../public/js/manage_settle_ref.js"></script>
<script type="text/javascript" src="js/socket.js"></script>
<script>
	let user = JSON.parse('<%-JSON.stringify(user)%>');
	let overview = JSON.parse('<%-JSON.stringify(overview)%>');
	let overviewShare = JSON.parse('<%-JSON.stringify(overviewShare)%>');
	let iocount = JSON.parse('<%-JSON.stringify(iocount)%>');

	let bSending = false;

	let iCurrentPage = 1;
	let iLimit = 100;

	let checkIdList = [];
	let iViewClass = 5;
	let iViewSettleState = 1;

	let strQuater = '';
	let strSubQuater = '';
	let iSettleDays = -1;
	let iSettleType = -1;

	let dateQuaterStart = '';
	let dateQuaterEnd = '';

	let selectQuater = 0;

	$(document).ready(() => {
		Alert(iocount, "<%=__('RequestInput')%>", "<%=__('RequestOutput')%>","<%=__('LetterSend')%>");

		SetCalculationHeader(110, user.iClass);

		$('#button_applysettle').hide();
		if ( user.iClass > 3 )
			$('#button_changesettle').hide();

		$("#lastquater_month").datepicker({
			format: 'yyyy-mm',
			language: 'kr',
			minViewMode: "months",
			startView: "months",
			autoclose : true
		});

		const date = new Date();
		let month = date.getMonth();
		if (date.getDate() == 1) {
			month = month - 1;
		}
		$('#quater_month').val(month);

		$(`#list_tit`).empty();
		$(`#list_tit`).append(`<h3>죽장 정산</h3>`);

		AddButtonEvent();

		// SetOverview(overview, '#overview', true, '', '');
		SetOverviewShare(overviewShare, overview, '#overview_share');
	});

	let RequestSettleList = () => {
		if (bSending) {
			return;
		}
		bSending = true;
		$.ajax({
			url:'/manage_settle/request_settle_list',
			type:"POST",
			data: {
				strGroupID:user.strGroupID,
				strQuater:strQuater,
				iClass: iViewClass,
				dateStart:dateQuaterStart,
				dateEnd:dateQuaterEnd,
				iLimit:iLimit,
				iPage:iCurrentPage,
				iUserClass: user.iClass,
				strSubQuater:strSubQuater,
				iSettleDays:iSettleDays,
				iSettleType:iSettleType
			},
			dataType: "json",
			error: function (request, status, error) {
				bSending = false;
				alert(error);
			},
			success: function (obj) {
				bSending = false;
				if ( obj.result == 'OK')
				{
					// RequestOverview(user.strGroupID, user.iClass, strQuater, dateQuaterStart, dateQuaterEnd, user.strID, strSubQuater);
					SetList(obj.list);
					$('#pagination').empty();
					$('#pagination').append(getPagination(iLimit, obj.totalCount, iCurrentPage));
				}
				else
				{
					alert(obj.msg);
				}
			}
		});
	};

	let RequestSettleExistList = () => {
		if (bSending) {
			alert('처리중');
			return;
		}
		bSending = true;
		$.ajax({
			url:'/manage_settle/request_settle_exist',
			type:"POST",
			data: {
				strGroupID:user.strGroupID,
				strQuater:strQuater,
				iClass: iViewClass,
				dateStart:dateQuaterStart,
				dateEnd:dateQuaterEnd,
				iLimit:iLimit,
				iPage:iCurrentPage,
				iUserClass: user.iClass,
				strSubQuater:strSubQuater,
				iSettleDays:iSettleDays,
				iSettleType:iSettleType
			},
			dataType: "json",
			error: function (request, status, error) {
				bSending = false;
				alert(error);
			},
			success: function (obj) {
				bSending = false;

				if ( obj.result == 'OK')
				{
					// RequestOverview(user.strGroupID, user.iClass, strQuater, dateQuaterStart, dateQuaterEnd, user.strID, strSubQuater);
					SetList(obj.list);
					$('#pagination').empty();
					$('#pagination').append(getPagination(iLimit, obj.totalCount, iCurrentPage));
				}
				else
				{
					alert(obj.msg);
				}
			}
		});
	}

	let SetList = (list) => {
		$('#list_agents').empty();
		$(`#list_tit`).empty();
		if ( user.iClass > 1 && user.iClass <= 3 && user.iPermission != 100) {
			if (iViewClass == 4 && iViewSettleState == 0) {
				$(`#list_tit`).append(`
					<h3>죽장 정산
						<button id='button_changesettle' style="margin-left:8%;width:200px;height:40px;text-align:center;background-color: rgb(82, 161, 206);color:white" onclick="DoApplySettle();"><strong>죽장 적용</strong></button>
						<button id='button_applysettle' style="margin-left:300px;width:200px;height:40px;text-align:center;background-color: rgb(218, 107, 107);color:white" onclick="RequestApplySettle();"><strong>죽장 지급</strong></button>
					</h3>
				`);
			} else if (iViewClass == 5 && iViewSettleState == 0) {
				$(`#list_tit`).append(`
					<h3>죽장 정산
						<button id='button_changesettle' style="margin-left:8%;width:200px;height:40px;text-align:center;background-color: rgb(82, 161, 206);color:white" onclick="DoApplySettle();"><strong>죽장 적용</strong></button>
						<button id='button_applysettle' style="margin-left:300px;width:200px;height:40px;text-align:center;background-color: rgb(218, 107, 107);color:white" onclick="RequestApplySettle();"><strong>죽장 지급</strong></button>
					</h3>
				`);
			} else {
				$(`#list_tit`).append(`
					<h3>죽장 정산
						<button id='button_changesettle' style="margin-left:8%;width:200px;height:40px;text-align:center;background-color: rgb(82, 161, 206);color:white" onclick="DoApplySettle();"><strong>죽장 적용</strong></button>
					</h3>
				`);
			}
		} else {
			$(`#list_tit`).empty();
			$(`#list_tit`).append(`
				<h3>죽장 정산</h3>
			`);
		}

		let ids = [];
		for (let i in list) {
			let obj = list[i];
			obj.parentID = obj.strAdminID;
			obj.parentNickname = obj.strAdminNickname;
			ids.push(obj.id);

			if (obj.iClass == 4) {
				let tag = AddPartner4(obj, i);
				$('#list_agents').append(tag);
			} else if (obj.iClass == 5) {
				obj.parentID = obj.strAdminID;
				obj.parentNickname = obj.strAdminNickname;
				let tag = AddPartner5(obj, i);
				$('#list_agents').append(tag);
			}
		}

		checkIdList = ids;
	}
</script>
<!--OnClick-->
<script>
	let OnClickDaySettlePeriod = (period, rset) => {
		dateQuaterStart = '';
		dateQuaterEnd = '';
		strSubQuater = '';
		selectQuater = 0;

		$('#settle_sub_quater').empty();
		$('#view_class').empty();

		if (period == 5) {
			$('#settle_sub_quater').append(`
				<button id="button_quater_sub_5_1" class="menu2" data-menu="20" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(5, 1, ${rset});">1분기</button>
				<button id="button_quater_sub_5_2" class="menu2" data-menu="21" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(5, 2, ${rset});">2분기</button>
				<button id="button_quater_sub_5_3" class="menu2" data-menu="22" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(5, 3, ${rset});">3분기</button>
				<button id="button_quater_sub_5_4" class="menu2" data-menu="23" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(5, 4, ${rset});">4분기</button>
				<button id="button_quater_sub_5_5" class="menu2" data-menu="24" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(5, 5, ${rset});">5분기</button>
				<button id="button_quater_sub_5_6" class="menu2" data-menu="25" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(5, 6, ${rset});">6분기</button>
			`);
		} else if (period == 10) {
			$('#settle_sub_quater').append(`
				<button id="button_quater_sub_10_1" class="menu2" data-menu="20" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(10, 1, ${rset});">1분기</button>
				<button id="button_quater_sub_10_2" class="menu2" data-menu="21" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(10, 2, ${rset});">2분기</button>
				<button id="button_quater_sub_10_3" class="menu2" data-menu="22" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(10, 3, ${rset});">3분기</button>
			`);
		} else if (period == 15) {
			$('#settle_sub_quater').append(`
				<button id="button_quater_sub_15_1" class="menu2" data-menu="20" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(15, 1, ${rset});">1분기</button>
				<button id="button_quater_sub_15_2" class="menu2" data-menu="21" style="border:1px solid rgb(95, 93, 93);width:70px;height:25px;text-align:center;color:white" onclick="OnClickQuater(15, 2, ${rset});">2분기</button>
			`);
		}
	}

	let OnClickQuater = (days, quater, rset) => {
		let sDay = 0;
		let eDay = 0;
		let iQuater = '';
		if (days == 5) {
			iSettleDays = days;
			iSettleType = rset;

			if (quater == 1) {
				sDay = 1;
				eDay = 5;
				iQuater = '1'
			} else if (quater == 2) {
				sDay = 6;
				eDay = 10;
				iQuater = '1'
			} else if (quater == 3) {
				sDay = 11;
				eDay = 15;
				iQuater = '1'
			} else if (quater == 4) {
				sDay = 16;
				eDay = 20;
				iQuater = '2'
			} else if (quater == 5) {
				sDay = 21;
				eDay = 25;
				iQuater = '2'
			} else if (quater == 6) {
				sDay = 26;
				eDay = 31;
				iQuater = '2'
			}
		} else if (days == 10) {
			iSettleDays = days;
			iSettleType = rset;
			if (quater == 1) {
				sDay = 1;
				eDay = 10;
				iQuater = '1'
			} else if (quater == 2) {
				sDay = 11;
				eDay = 20;
				iQuater = '2'
			} else if (quater == 3) {
				sDay = 21;
				eDay = 31;
				iQuater = '2'
			}
		} else if (days == 15) {
			iSettleDays = days;
			iSettleType = rset;
			if (quater == 1) {
				sDay = 1;
				eDay = 15;
				iQuater = '1'
			} else if (quater == 2) {
				sDay = 16;
				eDay = 31;
				iQuater = '2'
			}
		}
		let iMonth = parseInt($('#quater_month').val());
		dateQuaterStart = GetQuaterStartDate(iMonth, sDay);
		dateQuaterEnd = GetQuaterEndDate(iMonth, eDay);
		strQuater = `${parseInt(iMonth)+1}-${parseInt(iQuater)}`;
		strSubQuater = `${parseInt(iMonth)+1}-${parseInt(quater)}`;
		selectQuater = quater;
		iViewClass = 5;
		iViewSettleState = 0;
		OnClickSelectPartner(iViewClass);
	}

	let OnClickSelectPartner = (iClass) => {
		iViewClass = iClass;
		$('#view_class').empty();
		if (user.iClass <= 4) {
			$(`#view_class`).append(`
				<button id="button_viceadmin" class="${iViewClass == 5 ? 'menu5' : 'menu1'}" style="border:0; solid rgb(95, 93, 93);width:170px;height:25px;text-align:center;color:white" onclick="OnClickSelectPartner(5);">부본사</button>
				<button id="button_proadmin" class="${iViewClass == 4 ? 'menu5' : 'menu1'}" style="border:0; solid rgb(95, 93, 93);width:170px;height:25px;text-align:center;color:white" onclick="OnClickSelectPartner(4);">대본사</button>
				<button id="button_settle" class="menu1" style="border:0; solid rgb(95, 93, 93);width:170px;height:25px;text-align:center;color:white" onclick="OnClickSettleCal();">죽장 계산</button>
			`);
		} else if (user.iClass == 5) {
			$(`#view_class`).append(`
				<button id="button_viceadmin" class="menu5" style="border:0; solid rgb(95, 93, 93);width:170px;height:25px;text-align:center;color:white" onclick="OnClickSelectPartner(5);">부본사</button>
			`);
		}
		OnClickSettleState(iViewSettleState);
	}

	let OnClickSettleState = (state) => {
		if (user.iRootClass <= 3 && user.iPermission == 0) {
			iViewSettleState = state;
			$('#view_class_state').empty();
			if (user.iRootClass <= 3 && user.iPermission == 0) {
				$(`#view_class_state`).append(`
				<button id="button_settle_list" class="${iViewSettleState == 0 ? 'menu5' : 'menu1'}" style="border:0; solid rgb(95, 93, 93);width:170px;height:25px;text-align:center;color:white" onclick="OnClickSettleState(0);">대상목록</button>
				<button id="button_settle_exist" class="${iViewSettleState == 1 ? 'menu5' : 'menu1'}" style="border:0; solid rgb(95, 93, 93);width:170px;height:25px;text-align:center;color:white" onclick="OnClickSettleState(1);">완료목록</button>
			`);
			}

			if (iViewSettleState == 0) {
				RequestSettleList();
			} else {
				RequestSettleExistList();
			}
		} else {
			RequestSettleExistList();
		}
	}

	let OnClickMemo = (strNickname) => {
		let strValue = $(`#memoinput_${strNickname}`).val();
		$.ajax({
			url:'/manage_settle/request_savememo',
			type:"POST",
			data: {
				strNickname:strNickname,
				strValue:strValue,
			},
			dataType: "json",
			success: function (obj) {

				if ( obj.result == 'OK')
				{
					alert('저장 되었습니다.');
				}
				else
				{
					alert('저장 실패');
				}
			}
		});
	}

	let OnClickPage = (iPage) => {
		if (iPage < 1) {
			return;
		}
		iCurrentPage = iPage;
		if (iViewSettleState == 0) {
			RequestSettleList();
		} else {
			RequestSettleExistList();
		}
	}

	let OnClickHistory = (strNickname, strGroupID, iClass, strQuater) => {
		// window.open('', 'popupChkCalHistory', 'width=1080, height=720, top=100, left=100, fullscreen=no, menubar=no, status=no, toolbar=no, titlebar=yes, location=no, scrollbar=no');
		// let $form = $('<form></form>');
		// $form.attr('action', '/manage_calculation_settle/settle_cal_history');
		// $form.attr('method', 'post');
		// $form.attr('target', 'popupChkCalHistory');
		// $form.appendTo('body');
		//
		// let id = $(`<input type="hidden" value="${strNickname}" name="strNickname">`);
		// let idx = $(`<input type="hidden" value="${strQuater}" name="strQuater">`);
		// let page = $(`<input type="hidden" value="${strGroupID}" name="strGroupID">`);
		// let category = $(`<input type="hidden" value=${parseInt(iClass)} name="iClass">`);
		//
		// $form.append(id).append(idx).append(page).append(category);
		// $form.submit();
	}
</script>
<!--죽장 관련-->
<script>
	// 죽장률 변경 적용
	let DoApplySettle = () => {
		if (bSending) {
			alert('처리중입니다');
			return;
		}
		bSending = true;

		let agents = document.querySelectorAll("tr[class=Agent]");

		let list = [];
		let fParentSettleBaccarat = 100;
		let fParentSettleSlot = 100;
		let fParentSettlePBA = 100;
		let fParentSettlePBB = 100;

		console.log(`Agent Length : ${agents.length}`);

		let fSettleBaccaratParent = 0.0;
		let fSettleSlotParent = 0.0;
		let fSettlePBAParent = 0.0;
		let fSettlePBBParent = 0.0;


		for ( let i = 0; i < agents.length; ++i)
		{
			const element = agents[i];

			let fSettleBaccarat = parseFloat($(`#fSettleBaccarat${element.id}`).val());
			let fSettleSlot = parseFloat($(`#fSettleSlot${element.id}`).val());
			let fSettlePBA = 0.0;
			let fSettlePBB = 0.0;
			let iClass = parseInt($(`#iClass${element.id}`).val());

			fSettleBaccaratParent = fSettleBaccarat;
			fSettleSlotParent = fSettleSlot;
			fSettlePBAParent = fSettlePBA;
			fSettlePBBParent = fSettlePBB;

			if ( element != null )
			{
				list.push(element.id);
				list.push(iClass);
				list.push(fSettleBaccarat);
				list.push(fSettleSlot);
				list.push(fSettlePBA);
				list.push(fSettlePBB);

				fParentSettleBaccarat = fSettleBaccarat;
				fParentSettleSlot = fSettleSlot;
				fParentSettlePBA = fSettlePBA;
				fParentSettlePBB = fSettlePBB;
			}
		}

		if ( list.length == 0 )
			return;

		$.ajax({
			type:'post',
			url: "/manage_settle/request_modify_settle_group",
			context: document.body,
			data:{data:JSON.stringify(list)},
			success: (obj) => {
				bSending = false;

				if ( obj.result == 'OK' )
				{
					alert(strAlertComplete);
					location.reload();
				}
				else
				{
					alert(`${strAlertError}\r\n${obj.msg}`);
				}
			},
			error:function(request,status,error){
				bSending = false;

				alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
			}
		});
	}
	// 죽장 적용
	let RequestApplySettle = () => {
		if (bSending) {
			alert('처리중입니다.');
			closeAlertModal();
			return;
		}
		bSending = true;

		let ok = confirm('죽장 정산을 하시겠습니까?');
		if (ok != true) {
			bSending = false;
			return;
		}
		openAlertModal();

		let ids = '';
		for (let i in checkIdList) {
			ids = ids == '' ? checkIdList[i] : `${ids},${checkIdList[i]}`;
		}

		$.ajax({
			url:'/manage_settle/applysettle',
			type:"POST",
			data:{
				strGroupID:user.strGroupID,
				strQuater:strQuater,
				iClass: iViewClass,
				dateStart:dateQuaterStart,
				dateEnd:dateQuaterEnd,
				iLimit:iLimit,
				iPage:iCurrentPage,
				iUserClass: user.iClass,
				strSubQuater:strSubQuater,
				iSettleDays:iSettleDays,
				iSettleType:iSettleType,
				checkIdList:ids,
			},
			dataType: "json",
			success: function (obj) {
				bSending = false;
				closeAlertModal();

				console.log(obj);
				if ( obj.result == 'OK')
				{
					alert('정산이 완료 되었습니다.');
					iCurrentPage = 1;
					RequestList(user.strGroupID, strQuater, dateQuaterStart, dateQuaterEnd, iViewClass);
				}
				else if ( obj.result == 'EXIST' )
				{
					alert('이미 정산된 파트너 입니다.');
					iCurrentPage = 1;
					RequestList(user.strGroupID, strQuater, dateQuaterStart, dateQuaterEnd, iViewClass);
				}
				else
				{
					alert(obj.msg);
				}
			}
		});
	}
</script>
<!--Event-->
<script>
	let AddButtonEvent = () => {
		$(document).on('click', '#button_quater_5_0', (e) => {
			$('.menu5').attr('class', 'menu1');
			$(e.currentTarget).attr('class', 'menu5');
		});

		$(document).on('click', '#button_quater_5_1', (e) => {
			$('.menu5').attr('class', 'menu1');
			$(e.currentTarget).attr('class', 'menu5');
		});

		$(document).on('click', '#button_quater_10_0', (e) => {
			$('.menu5').attr('class', 'menu1');
			$(e.currentTarget).attr('class', 'menu5');
		});

		$(document).on('click', '#button_quater_10_1', (e) => {
			$('.menu5').attr('class', 'menu1');
			$(e.currentTarget).attr('class', 'menu5');
		});

		$(document).on('click', '#button_quater_15_0', (e) => {
			$('.menu5').attr('class', 'menu1');
			$(e.currentTarget).attr('class', 'menu5');
		});

		$(document).on('click', '#button_quater_15_1', (e) => {
			$('.menu5').attr('class', 'menu1');
			$(e.currentTarget).attr('class', 'menu5');
		});

		$(document).on('click', '#button_quater_sub_5_1', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});
		$(document).on('click', '#button_quater_sub_5_2', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});
		$(document).on('click', '#button_quater_sub_5_3', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});
		$(document).on('click', '#button_quater_sub_5_4', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});
		$(document).on('click', '#button_quater_sub_5_5', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});
		$(document).on('click', '#button_quater_sub_5_6', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});

		$(document).on('click', '#button_quater_sub_10_1', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});
		$(document).on('click', '#button_quater_sub_10_2', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});
		$(document).on('click', '#button_quater_sub_10_3', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});
		$(document).on('click', '#button_quater_sub_15_1', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});
		$(document).on('click', '#button_quater_sub_15_2', (e) => {
			$('.menu6').attr('class', 'menu2');
			$(e.currentTarget).attr('class', 'menu6');
		});
	}
</script>
<!--Set-->
<script>
	let AddPartner5 = (aObject, index) => {
		let color = '#E8FCDE';
		let tagoption = 'disabled="disabled"';
		let idx = parseInt(index) + 1;
		let headtag = `<td>${idx}</td>`;
		headtag += `<td>${aObject.parentNickname ?? ''}`;

		let subtag = `<tr id=${aObject.strNickname} class='Agent' onmouseover="this.style.backgroundColor='#9FB6FF'" onmouseout="this.style.background='blue'">
				${headtag}
					<input type='hidden' id='iClass${aObject.strNickname}' value='${aObject.iClass}' >
				<td style="background-color:${color};"  class="parent_row_31">
					<a id="request_partneragents" href="#" onclick="OnClickNickname('${aObject.strNickname}')" style="color:blue;">${aObject.strNickname}</a>
				</td>
			`;


		if ( user.iClass > 1 && user.iClass <= 3 && user.iPermission != 100 ) {
			subtag += `
					<td style="background-color:${color};"  class="parent_row_31">
				<input type="text" style="width:50%;" name="bakara_over_31" id="fSettleBaccarat${aObject.strNickname}" required="no" message="죽장" value=${aObject.fSettleBaccarat ?? 0} ${tagoption}>
				%
				</td>

				<td style="background-color:${color};"  class="parent_row_31">
				<input type="text" style="width:50%;" name="bakara_over_31" id="fSettleSlot${aObject.strNickname}" required="no" message="죽장" value=${aObject.fSettleSlot ?? 0} ${tagoption}>
				%
				</td>
				`;
		} else {
			subtag += `
					<td style="background-color:${color};"  class="parent_row_31"></td>
					<td style="background-color:${color};"  class="parent_row_31"></td>
				`;
		}
		let iBaccaratWinLose = parseFloat(aObject.iBaccaratWinLose) + parseFloat(aObject.iUnderOverWinLose);

		subtag += `<td style="background-color:${color};"  class="parent_row_31"><a><font color="${GetColor(aObject.iTotal)}" id='total_${aObject.strNickname}'>${GetNumber(aObject.iTotal)}</font></a></td>`;
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetColor(iBaccaratWinLose)}" id='bwinlose_${aObject.strNickname}'>${GetNumber((iBaccaratWinLose))}</font></td>`;
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetColor(aObject.iSlotWinLose)}" id='swinlose_${aObject.strNickname}'>${GetNumber((aObject.iSlotWinLose))}</font></td>`;

		// 부본 죽장
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(aObject.iSettleVice)}" id='settleevice_${aObject.strNickname}'>${GetNumber((aObject.iSettleVice))}</font></td>`;
		// 대본 B알값
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(aObject.iCommissionBaccarat)}" id='commissionb_${aObject.strNickname}'>${GetNumber(aObject.iCommissionBaccarat)}</font></td>`;
		// 대본 S알값
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(aObject.iCommissionSlot)}" id='commissions_${aObject.strNickname}'>${GetNumber(aObject.iCommissionSlot)}</font></td>`;
		// 대본 죽장
		if (aObject.iClass == 5) {
			subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(0)}" id='settlepro_${aObject.strNickname}'>${GetSettleNumber(0)}</font></td>`;
		} else {
			subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(aObject.iSettle)}" id='settlepro_${aObject.strNickname}'>${GetSettleNumber(aObject.iSettle)}</font></td>`;
		}
		// 합계
		if (iViewClass == 4) {
			subtag += `<td style="background-color:${color};"  class="parent_row_31">${GetNumber(aObject.iResult)}</font></td>`;
		} else {
			subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetColor(aObject.iResult)}" id='result4_${aObject.strNickname}'>${GetNumber(aObject.iResult)}</font></td>`;
		}

		// 죽장 지급
		subtag += `<td style="background-color:${color};" class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleGive)}</font></td>`;
		// 죽장 이월
		subtag += `<td style="background-color:${color};" class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleAccTotal)}</font></td>`;
		// 수금(전월죽장이월금액에 대한 수금 여부)
		subtag += `<td style="background-color:${color};" class="parent_row_31"><font color="black" id="payback_${aObject.strNickname}">${GetNumberSign(aObject.iPayback)}</font></td>`;

		// 죽장 적립(입력창)
		if ( user.iPermission != 100 )
		{
			subtag += `
				<td style="background-color:${color};" class="parent_row_31">
					<input type="number" style='width:80%;height:20px;text-align:center;color:black;' value='${aObject.iTotal != 0 ? parseInt(aObject.iInputQuaterSettle) : 0}' id='input_${aObject.strNickname}' disabled/>
				</td>`;
		}
		else
		{
			subtag += `<td style="background-color:${color};" class="parent_row_31"></td>`;
		}

		// 죽장 총합
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleTotal)}</font></td>`;
		// 전월죽장 이월
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleBeforeAcc)}</font></td>`;
		// 총 이월
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="black"><a href="javascript:RequestPartnerCredits('${aObject.strNickname}', '${aObject.strGroupID}', '${aObject.iClass}');">${GetNumberSign(aObject.iSettleAccTotal)}</a></font></td>`;

		if ( user.iClass > 1 && user.iClass <= 3 && user.iPermission != 100 )
		{
			subtag += `<td style="background-color:${color};"  class="parent_row_31"><input style='width:70%;' type='text' id="memoinput_${aObject.strNickname}" value='${aObject.strSettleMemo ?? ''}'><button style='color:white;' class='menu4' onclick='OnClickMemo("${aObject.strNickname}");'>저장</button></td>`;
		}
		else
		{
			subtag += `<td style="background-color:${color};">${aObject.strSettleMemo ?? ''}</td>`;
		}

		subtag += `</tr>`;

		return subtag;
	}

	let AddPartner4 = (aObject, index) => {
		let color = '#E8FCDE';
		let tagoption = 'disabled="disabled"';
		let idx = parseInt(index) + 1;
		let headtag = `<td>${idx}</td>`;
		headtag += `<td>${aObject.strAdminNickname ?? ''}`;

		let subtag = `<tr id=${aObject.strNickname} class='Agent' onmouseover="this.style.backgroundColor='#9FB6FF'" onmouseout="this.style.background='blue'">
				${headtag}
					<input type='hidden' id='iClass${aObject.strNickname}' value='${aObject.iClass}' >
				<td style="background-color:${color};"  class="parent_row_31">
					<a id="request_partneragents" href="#" onclick="OnClickNickname('${aObject.strNickname}')" style="color:blue;">${aObject.strNickname}</a>
				</td>`;

		if ( user.iClass > 1 && user.iClass <= 3 && user.iPermission != 100 ) {
			subtag += `
					<td style="background-color:${color};"  class="parent_row_31">
				<input type="text" style="width:50%;" name="bakara_over_31" id="fSettleBaccarat${aObject.strNickname}" required="no" message="죽장" value=${aObject.fSettleBaccarat ?? 0} ${tagoption}>
				%
				</td>

				<td style="background-color:${color};"  class="parent_row_31">
				<input type="text" style="width:50%;" name="bakara_over_31" id="fSettleSlot${aObject.strNickname}" required="no" message="죽장" value=${aObject.fSettleSlot ?? 0} ${tagoption}>
				%
				</td>
				`;
		} else {
			subtag += `
					<td style="background-color:${color};"  class="parent_row_31"></td>
					<td style="background-color:${color};"  class="parent_row_31"></td>
				`;
		}

		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetColor(aObject.iTotal)}" id='total_${aObject.strNickname}'>${GetNumber(aObject.iTotal)}</font></td>`;
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetColor(aObject.iBaccaratWinLose+aObject.iUnderOverWinLose)}" id='bwinlose_${aObject.strNickname}'>${GetNumber((aObject.iBaccaratWinLose+aObject.iUnderOverWinLose))}</font></td>`;
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetColor(aObject.iSlotWinLose)}" id='swinlose_${aObject.strNickname}'>${GetNumber((aObject.iSlotWinLose))}</font></td>`;
		// 부본 죽장
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(aObject.iSettleVice)}" id='settleevice_${aObject.strNickname}'>${GetNumber((aObject.iSettleVice))}</font></td>`;
		// 대본 B알값
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(aObject.iCommissionBaccarat)}" id='commissionb_${aObject.strNickname}'>${GetNumber(aObject.iCommissionBaccarat)}</font></td>`;
		// 대본 S알값
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(aObject.iCommissionSlot)}" id='commissions_${aObject.strNickname}'>${GetNumber(aObject.iCommissionSlot)}</font></td>`;
		// 대본 죽장
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(aObject.iSettle)}" id='settlepro_${aObject.strNickname}'>${GetSettleNumber(aObject.iSettle)}</font></td>`;
		// 합계
		if (iViewClass == 4) {
			subtag += `<td style="background-color:${color};"  class="parent_row_31"><a href="#" onclick="OnClickHistory('${aObject.strNickname}', '${aObject.strGroupID}', ${aObject.iClass}, '${strQuater}');"><font color="${GetColor(aObject.iResult)}" id='result_${aObject.strNickname}'>${GetNumber(aObject.iResult)}</font></a></td>`;
		} else {
			subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetColor(aObject.iResult)}" id='result_${aObject.strNickname}'>${GetNumber(aObject.iResult)}</font></td>`;
		}
		// 죽장 지급
		subtag += `<td style="background-color:${color};" class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleGive)}</font></td>`;
		// 죽장 이월
		subtag += `<td style="background-color:${color};" class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleAcc)}</font></td>`;
		// 수금(전월죽장이월금액에 대한 수금 여부)
		subtag += `<td style="background-color:${color};" class="parent_row_31"><font color="black" id="payback_${aObject.strNickname}">${GetNumberSign(aObject.iPayback)}</font></td>`;
		// 죽장 적립(입력창)
		subtag += `
				<td style="background-color:${color};" class="parent_row_31">
					<input type="number" style='width:80%;height:20px;text-align:center;color:black;' value='${aObject.iTotal != 0 ? parseInt(aObject.iInputQuaterSettle) : 0}' id='input_${aObject.strNickname}' disabled/>
				</td>`;

		// 죽장 총합
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleTotal)}</font></td>`;
		// 전월죽장 이월
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleBeforeAcc)}</font></td>`;
		// 총 이월
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="black"><a href="javascript:RequestPartnerCredits('${aObject.strNickname}', '${aObject.strGroupID}', '${aObject.iClass}');">${GetNumberSign(aObject.iSettleAccTotal)}</a></font></td>`;

		if ( user.iClass > 1 && user.iClass <= 3 && user.iPermission != 100 )
		{
			subtag += `<td style="background-color:${color};"  class="parent_row_31"><input style='width:70%;' type='text' id="memoinput_${aObject.strNickname}" value='${aObject.strSettleMemo ?? ''}'><button style='color:white;' class='menu4' onclick='OnClickMemo("${aObject.strNickname}");'>저장</button><button style="color:white;" class="menu1" onclick="OnClickHistory('${aObject.strNickname}', '${aObject.strGroupID}', ${aObject.iClass}, '${strQuater}');">상세보기</button></td>`;
		}
		else
		{
			subtag += `<td style="background-color:${color};">${aObject.strSettleMemo ?? ''}</td>`;
		}

		subtag += `</tr>`;
		return subtag;
	}

	let AddTotal = (aObject) => {
		let color = '#ffffff';
		let subtag = '<td colspan="5">합계</td>';
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><a><font color="${GetColor(aObject.iTotal)}" id='total_${aObject.strNickname}'>${GetNumber(aObject.iTotal)}</font></a></td>`;
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetColor(aObject.iBaccaratWinLose+aObject.iUnderOverWinLose)}" id='bwinlose_${aObject.strNickname}'>${GetNumber((aObject.iBaccaratWinLose+aObject.iUnderOverWinLose))}</font></td>`;
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetColor(aObject.iSlotWinLose)}" id='swinlose_${aObject.strNickname}'>${GetNumber((aObject.iSlotWinLose))}</font></td>`;
		// 부본 죽장
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor((aObject.iSettleVice))}" id='settleevice_${aObject.strNickname}'>${GetNumber((aObject.iSettleVice))}</font></td>`;
		// 대본 B알값
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(aObject.iCommissionBaccarat)}" id='commissionb_${aObject.strNickname}'>${GetNumber(aObject.iCommissionBaccarat)}</font></td>`;
		// 대본 S알값
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor(aObject.iCommissionSlot)}" id='commissions_${aObject.strNickname}'>${GetNumber(aObject.iCommissionSlot)}</font></td>`;
		// 대본 죽장
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetInversedColor((aObject.iSettle))}" id='settlepro_${aObject.strNickname}'>${GetSettleNumber(aObject.iSettle)}</font></td>`;
		// 합계
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="${GetColor(aObject.iResult)}" id='result_${aObject.strNickname}'>${GetNumber(aObject.iResult)}</font></td>`;
		// 죽장 지급
		subtag += `<td style="background-color:${color};" class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleGive)}</font></td>`;
		// 죽장 이월
		subtag += `<td style="background-color:${color};" class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleAcc)}</font></td>`;
		// 수금
		subtag += `<td style="background-color:${color};" class="parent_row_31"><font color="black" id="quatersettle_${aObject.strNickname}">${GetNumberSign(aObject.iPayback)}</font></td>`;
		// 죽장 적립(입력창)
		subtag += `<td style="background-color:${color};" class="parent_row_31"></td>`;
		// 죽장 총합
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleTotal)}</font></td>`;
		// 전월죽장 이월
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="black">${GetNumberSign(aObject.iSettleBeforeAcc)}</font></td>`;
		// 총 이월
		subtag += `<td style="background-color:${color};"  class="parent_row_31"><font color="black"><a href="javascript:RequestPartnerCredits('${aObject.strNickname}', '${aObject.strGroupID}', '${aObject.iClass}');">${GetNumberSign(aObject.iSettleAccTotal)}</a></font></td>`;
		// 메모
		subtag += `<td style="background-color:${color};"></td>`;

		return `<tr style="font-weight: bold">${subtag}</tr>`;
	}

	let SetOverviewShare = (overviewShare, overview, strParentTag) => {

		$(strParentTag).empty();
		let iRealTotal = parseFloat(overviewShare.iShareOrgin) + parseFloat(overviewShare.iSlotCommission) + parseFloat(overviewShare.iShareReceive) + parseFloat(overviewShare.iPayback); // 순이익
		let iShare = parseFloat(overviewShare.iShare ?? 0); // 배당금
		let iShareAccBefore = parseFloat(overviewShare.iShareAccBefore ?? 0); // 지분자 전월 이월
		let iCreditBefore = parseFloat(overviewShare.iCreditBefore ?? 0); // 지분자 총 이월
		let iShareTotal = iRealTotal - iShare; // 지분자 순이익 - 배당금
		let iCurrentTotalShare = parseFloat(overviewShare.iCurrentTotalShare ?? 0); // 현재 잔여 지분금액
		let iSharePlus = parseFloat(overviewShare.iSharePlus ?? 0);
		let iShareMinus = parseFloat(overviewShare.iShareMinus ?? 0);

		// 대본보관죽장
		let iCurrentTotalSettle = parseFloat(overview.iCurrentTotalSettle ?? 0);
		let iSettlePlus = parseFloat(overview.iSettlePlus ?? 0);
		let iSettleMinus = parseFloat(overview.iSettleMinus ?? 0);

		let shareTag = `
				<table class="search_list" style="margin-bottom:20px;">
					<thead>
						<tr>
							<th width="5%" rowspan="2"></th>
							<th width="10%" rowspan="2">순이익</th>
							<th width="10%" rowspan="2">배당금</th>
							<th width="10%" rowspan="2">지분자 전월 이월</th>
							<th width="10%" rowspan="2">지분자 총 이월</th>
							<th width="10%" rowspan="2">합계</th>
							<th width="5%" rowspan="2"></th>
							<th width="20%" rowspan="2" colspan="2">대&#183;부본보관죽장*</th>
							<th width="20%" rowspan="2" colspan="2">지분자보관죽장*</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><a style="font-weight:100;"></a></td>
							<td><a style="font-weight:100;"></a>${GetNumberSign(iRealTotal)}</td>
							<td><a style="font-weight:100;"></a>${GetNumberSign(iShare)}</td>
							<td><a style="font-weight:100;"></a>${GetNumberSign(iShareAccBefore)}</td>
							<td><a style="font-weight:100;"></a>${GetNumberSign(iCreditBefore)}</td>
							<td><a style="font-weight:100;"></a>${GetNumberSign(iShareTotal)}</td>
							<td></td>
							<td><a style="font-weight:100;"></a>${GetNumberSign(iCurrentTotalSettle)}</td>
							<td style="text-align:center;background-color:#FFFACD;">
								<a style="font-weight:100; color:${GetInversedColor(iSettlePlus)}">${GetNumberSign(iSettlePlus, 0)}</a><br>
								<a style="font-weight:100; color:${GetInversedColor(iSettleMinus)}">${GetNumberSign(iSettleMinus, 0)}</a>
							</td>
							<td style="" class="parent_row_31">${GetNumberSign(iCurrentTotalShare)}</td>
							<td style="text-align:center;background-color:#FFFACD;">
								<a style="font-weight:100; color:${GetInversedColor(iSharePlus)}">${GetNumberSign(iSharePlus, 0)}</a><br>
								<a style="font-weight:100; color:${GetInversedColor(iShareMinus)}">${GetNumberSign(iShareMinus, 0)}</a>
							</td>
						</tr>
					</tbody>
				</table>
			`;
		$(strParentTag).append(shareTag);

		// if ( user.iClass <= 3 ) {
		//
		// }
	}
</script>
<!--Request -->
<script>
	let RequestOverview = (strGroupID, iClass, strQuater, dateStart, dateEnd, strID, strSubQuater, iSettleDays, iSettleType) => {
		$.ajax({
			url:'/manage_settle/request_overview3',
			type:"POST",
			data: {
				strGroupID:strGroupID,
				iClass:iClass,
				strQuater:strQuater,
				dateStart:dateStart,
				dateEnd:dateEnd,
				strID: strID,
				strSubQuater: strSubQuater,
				iSettleDays: iSettleDays,
				iSettleType:iSettleType
			},
			dataType: "json",
			success: function (obj) {

				console.log(`RequestOverview`);
				console.log(obj);

				if ( obj.result == 'OK')
				{
					// SetOverview(obj.overview, '#overview', true, obj.strMemo, obj.strMemo2, obj.iRootClass);

					SetOverviewShare(obj.overviewShare, obj.overview, '#overview_share');
				}
				else
				{
				}
			}
		});
	}

</script>
